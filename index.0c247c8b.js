let e,t,o,n,a,i,r,s,c,l,u,p,h,m,d,_,f,g,b,y;const k=[],v=[],q=()=>Math.trunc(10*Math.random()+1),S={preBook:[{id:crypto.randomUUID(),title:"book name A",authorName:"author name A",genre:["comedy","romance","slice of life","actions"],quantity:10,imgUrl:`book-${q()}.jpg`,releaseYear:2015,releaseVersion:3,popularity:8.5,pages:450,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name B",authorName:"author name B",genre:["comedy","slice of life"],quantity:5,imgUrl:`book-${q()}.jpg`,releaseYear:2018,releaseVersion:2,popularity:8,pages:400,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name C",authorName:"author name C",genre:["comedy","romance","slice of life","actions","tragedy"],quantity:0,imgUrl:`book-${q()}.jpg`,releaseYear:2010,releaseVersion:5,popularity:10,pages:500,GNUlicense:!0,language:"bangla",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name D",authorName:"author name D",genre:["comedy","romance","actions"],quantity:4,imgUrl:`book-${q()}.jpg`,releaseYear:2020,releaseVersion:1,popularity:5,pages:200,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name E",authorName:"author name E",genre:["comedy","romance","slice of life","actions","adults"],quantity:8,imgUrl:`book-${q()}.jpg`,releaseYear:2022,releaseVersion:2,popularity:4.8,pages:200,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name F",authorName:"author name F",genre:["comedy","slice of life","actions","NTR"],quantity:20,imgUrl:`book-${q()}.jpg`,releaseYear:2020,releaseVersion:2,popularity:10,pages:600,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name G",authorName:"author name G",genre:["heroic","historical","slice of life","actions"],quantity:2,imgUrl:`book-${q()}.jpg`,releaseYear:2018,releaseVersion:6,popularity:7.5,pages:550,GNUlicense:!0,language:"bangla",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name H",authorName:"author name H",genre:["comedy","romance","slice of life","actions","drama"],quantity:7,imgUrl:`book-${q()}.jpg`,releaseYear:2010,releaseVersion:2,popularity:9.6,pages:120,GNUlicense:!0,language:"bangla",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name I",authorName:"author name I",genre:["comedy","NTR","actions"],quantity:10,imgUrl:`book-${q()}.jpg`,releaseYear:2021,releaseVersion:7,popularity:9.5,pages:200,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name J",authorName:"author name J",genre:["Bloody","adults","slice of life","actions"],quantity:10,imgUrl:`book-${q()}.jpg`,releaseYear:2023,releaseVersion:3,popularity:7.1,pages:350,GNUlicense:!0,language:"bangla",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name K",authorName:"author name K",genre:["comedy","romance","historical","drama"],quantity:15,imgUrl:`book-${q()}.jpg`,releaseYear:2012,releaseVersion:5,popularity:10,pages:800,GNUlicense:!0,language:"bangla",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name L",authorName:"author name L",genre:["comedy","slice of life","drama","actons","adults"],quantity:30,imgUrl:`book-${q()}.jpg`,releaseYear:2010,releaseVersion:1,popularity:1.9,pages:300,GNUlicense:!0,language:"bangla",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name M",authorName:"author name M",genre:["comedy","school","politics","NTR"],quantity:0,imgUrl:`book-${q()}.jpg`,releaseYear:2015,releaseVersion:3,popularity:8.5,pages:230,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name N",authorName:"author name N",genre:["comedy","actions","school","animation","webtoons"],quantity:6,imgUrl:`book-${q()}.jpg`,releaseYear:2002,releaseVersion:5,popularity:9.5,pages:500,GNUlicense:!0,language:"bangla",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"},{id:crypto.randomUUID(),title:"book name O",authorName:"author name O",genre:["comedy","romance","slice of life","actions"],quantity:10,imgUrl:`book-${q()}.jpg`,releaseYear:2015,releaseVersion:3,popularity:8.5,pages:450,GNUlicense:!0,language:"english",authorBio:"author bio link",publicationLink:"publication link",publicationName:"Haque"}],newBook:v},w=document.querySelector(".container"),N=document.querySelector(".overlay"),$=document.querySelector(".spinner"),L=document.querySelector(".tool-tip__book-upload");function U(e,t,o="beforeend"){e.insertAdjacentHTML(`${o}`,t)}function x(e,t,o=""){(function(e,t){let o=`
	<div class="modal ${t}">
		<p class="modal__message"></p>
		<button class="btn modal__btn">OK, I UNDERSTAND</button>
	</div>`;e.insertAdjacentHTML("afterbegin",o)})(e,t),N.classList.remove("overlay-off"),document.querySelector(".modal__message").textContent=o}function j(){document.querySelector(".modal").remove(),N.classList.add("overlay-off")}function T(e){e?.target.classList.contains("navigator__link")&&(D(w),H($))}function B(e,t=[]){Array.isArray(t);let o=t.map(e=>`
				<li class="book__item">
					<section class="img">
						<img
						src="${e?.imgUrl}"
						alt="${e.title}" />
					</section>
					<section class="book__item__description">
						<p class="item__quantity">${e.quantity}</p>;
						<h3 class="item__title">${e.title}</h3>
						<p class="item__genere">
						${e.genre}
						</p>
						<h6 class="item__author-name">${e.authorName}</h6>
					</section>
				</li>
	`).join("");e.innerHTML=o}L.addEventListener("mouseenter",()=>{let e=`
		<section class="tool-tip">
			<p class="tool-tip__message">fetch random online book image from unspalsh api!</p>
		</section>
		`;document.querySelector("#random-photo__label").insertAdjacentHTML("beforeend",e)}),L.addEventListener("mouseleave",()=>{setTimeout(()=>{A(document.querySelector("#random-photo__label .tool-tip"))},1200)});const E=[];function I(){return null===localStorage.getItem("newBook")?[]:JSON.parse(localStorage.getItem("newBook"))}function D(...e){e.forEach(e=>e.classList.add("hidden"))}function H(...e){e.forEach(e=>{e.classList.remove("hidden")})}function A(...e){e.forEach(e=>e?.remove())}function C(e,...t){e.classList.add(...t)}function M(e,...t){e.classList.remove(...t)}document.addEventListener("DOMContentLoaded",()=>{null!==localStorage.getItem("newBook")&&E.push(...JSON.parse(localStorage.getItem("newBook"))),k.push(JSON.parse(localStorage.getItem("newBook"))),B(document.querySelector(".view-books-offline__custom #viewbooks__offline__section"),E)}),document.querySelector(".clear-all").addEventListener("click",e=>{localStorage.removeItem("newBook"),document.querySelector(".view-books-offline__custom #viewbooks__offline__section").innerHTML=""});const G=e=>document.querySelectorAll("input[type='search']").forEach(e=>e.value=""),P=[...S.preBook,...I()].map(e=>e.title),V=e=>P.includes(e),Y=e=>[...I(),...S.preBook].find(t=>t.title===e),O=document.querySelector(".welcome"),F=document.querySelector(".welcome-btn"),W=document.querySelector(".library-management"),J=document.querySelector(".view-books"),z=document.querySelector(".search-books"),K=document.querySelector(".upload-book"),R=document.querySelector(".search-online"),X=document.querySelector(".issue-book");function Q(e){T(e),setTimeout(()=>{H(w),D($),D(O),H(W,J,z,K,R,X)},300)}document.querySelector(".contributor-section"),F.addEventListener("click",Q);const Z=async()=>{try{let e=await fetch("https://api.unsplash.com/photos/random?query=bookcover&client_id=wztGNHFuJ25HJkJ8UhXkQDGo0r_rKT17DVqwBfH4p1Q");if(!e.ok)throw Error("Network response was not ok!");return(await e.json()).urls.thumb}catch(e){"TypeError"===e.name&&"Failed to fetch"===e.message?console.error("network error: ",e.message):console.error(e)}};document.querySelector(".container");const ee=document.querySelector(".welcome"),et=document.querySelector(".library-management"),eo=document.querySelector(".view-books"),en=document.querySelector(".search-books"),ea=document.querySelector(".upload-book"),ei=document.querySelector(".search-online"),er=document.querySelector(".issue-book");document.querySelector(".contributor-section");const es=document.querySelector("#back-btn");async function ec(t){T(t),setTimeout(()=>{if(es){H(w),D($);let e=t.target.dataset.backTo;if("mainPage"===e)D(et),H(ee);else if("libraryPage"===e){let e=t.target.parentElement.className;D(document.querySelector(`.${e}`)),H(et,eo,en,ea,ei,er)}}!t.target.closest(".library-management")||t.target.classList.contains("library-management")||t.target.classList.contains("h1")||(D(document.querySelector(".library-management"),document.querySelector(".view-books"),document.querySelector(".search-books"),document.querySelector(".upload-book"),document.querySelector(".search-online"),document.querySelector(".issue-book"),document.querySelector(".contributor-section")),function(e){let t=e.target.dataset.pointer;t&&H(document.querySelector(`.${t}`))}(t))},300),"search-books-offline"===t.target.dataset.pointer&&(D(document.querySelector(".search-books-offline .search-result")),A(document.querySelector(".search-result .search-result__section .book .book__info"))),"upload-book-container"===t.target.dataset.pointer&&(e=await Z())}document.querySelector(".spinner"),document.addEventListener("click",ec);const el=document.querySelector(".upload-book-container");let eu="off";const ep=document.querySelector("#form-upload");function eh(g){if(g.preventDefault(),"form-upload"!==g.target.id)return;em();let b=function(){let e=[],_=!0,f=/^[a-z]+[\sa-z]*$/gi,g=/^(?:[1-9]\d{0,3}|1000)$/g,b=/^https:\/\/www\.\w+\.com$/gi;return e.push(t.match(f)),e.push(o.match(f)),e.push(n.match(/^[a-z]+[,\sa-z]*$/gi)),e.push(a.match(f)),e.push(i.match(g)),e.push(r.match(g)),e.push(s.match(g)),e.push(c.match(g)),e.push(p.match(b)),e.push(h.match(b)),e.push(m.match(f)),e.push(d.match(g)),!1===l&&!1===u&&(_=!1),e.flat().forEach(e=>{null===e&&(_=!1)}),_}();if(ed(g,b),!b)return;f="on"===eu?_.files[0].name:e;let y=!0===l,k={id:crypto.randomUUID(),title:t,authorName:o,genre:n,language:a,releaseYear:i,releaseVserion:r,popularity:s,pages:c,GNUlicense:y,authorBio:p,publicationLink:h,publicationName:m,quantity:d,imgUrl:f};v.push(k),function(e){E.push(e);let t=JSON.stringify(E);localStorage.setItem("newBook",t)}(k),B(document.querySelector(".view-books-offline__custom #viewbooks__offline__section"),E)}const em=()=>{t=document.querySelector("#book-name__input").value,o=document.querySelector("#book-author__input").value,n=document.querySelector("#book-genre__input").value,a=document.querySelector("#book-language__input").value,i=document.querySelector("#book-release__input").value,r=document.querySelector("#book-release-version__input").value,s=document.querySelector("#book-popularity__input").value,c=document.querySelector("#book-page__input").value,l=document.querySelector("#book-license__y").checked,u=document.querySelector("#book-license__n").checked,p=document.querySelector("#book-author-bio__input").value,h=document.querySelector("#book-publication-link__input").value,m=document.querySelector("#book-publication-name__input").value,d=document.querySelector("#book-quantity__input").value,_=document.querySelector("#book-image__input")},ed=(e,t)=>{e.target.closest(".upload-book-container")&&!t?x(el,"error","There might be something wrong with your input... Please check your input."):e.target.closest(".upload-book-container")&&t&&x(el,"success","Congratulation! You have successfully added a new books the library collection.")};document.addEventListener("click",e=>{e.target.classList.contains("modal__btn")?j():e.target.classList.contains("overlay")&&j()}),ep.addEventListener("click",eh),document.querySelector("#random-photo__label #random-photo").addEventListener("change",e=>{e.target.checked||(A(document.querySelector("#random-photo__label")),M(document.querySelector("#book-image__label"),"hidden"))}),document.querySelector("#book-image__input").addEventListener("change",e=>{eu="on",f=e.target.files[0].name});const e_=document.querySelector("#viewbooks__offline__section");function ef(){let e=S.preBook.map(e=>`
   <li class="book__item ${0===e.quantity?"no-quantity-book":""} ${e.quantity<=5?"low-quantity-book":""}" data-id="${e.id}">
      <section class="img">
        <img src="${e.imgUrl}"
             alt="sample book picture">
      </section>

      <section class="book__item__description">
        <p class="item__quantity">${e.quantity}</p>
        <h3 class="item__title">${e.title}</h3>
        <p class="item__genere">${e.genre}</p>
        <h6 class="item__author-name">${e.authorName}</h6>
      </section>
   </li>
  `).join("");e_.innerHTML=e}function eg(){ef()}document.addEventListener("DOMContentLoaded",eg);const eb=document.querySelector(".search-books-offline"),ey=document.querySelector("#search__books__offline__input"),ek=document.querySelector("#search__books__offline__btn"),ev=document.querySelector(".search-result");function eq(e){if(e.preventDefault(),e.target.closest(".search-books-offline")&&D(document.querySelector(".search-books-offline .search-result")),e.target.closest(".search-books-offline")&&!V(g))return x(eb,"sorry, We could not find the book you query. please try again"),G();H(ev),G(),Y(g);let t=[];t.push(Y(g));let o=t.map(e=>`
	<li class="book__info">
		<figure>
			<img src="${e.imgUrl}" alt="${e.title}">
		</figure>
		<section class="book__info__details">
			<p>book name: ${e.title}</p>
			<p>author name: ${e.authorName}</p>
			<p>book language: ${e.language}</p>
			<p>genre: ${e.genre} </p>
			<p>release year: ${e.releaseYear}</p>
			<p>release version: ${e.releaseVersion}</p>
			<p>popularity: ${e.popularity} </p>
			<p>book pages: ${e.pages} </p>
			<p>book license: ${e.GNUlicense}</p>
			<p>author bio link: ${e.authorBio} </p>
			<p>book publication link: ${e.publicationLink}</p>
			<p>publication name: ${e.publicationName} </p>
		</section>
	</li>`).join("");document.querySelector(".search-result__lists").innerHTML=o}ey.addEventListener("input",function(e){g=e.target.value,0===e.target.value.length&&document.querySelector(".search-result__lists .book__item")?.remove()}),ek.addEventListener("click",eq);const eS=document.querySelector(".issue__book"),ew=document.querySelectorAll(".book__issue__step"),eN=document.querySelector(".issue__book #search__books__offline__input"),e$=document.querySelector(".issue__book .search-result__section"),eL=document.querySelector(".issue__book .book-mark");document.querySelector(".issue__book .issue__book__progress h1");const eU=["find book","check availablity","check library card","provide book information","checkout processing","input delivery address","due date","pick up the book"],ex=(e,t="Next Step")=>`
	<button class="btn anim-btn next__step__btn" data-go-next-step="${e}">${t}
	</button>
`;function ej(){ew.forEach(e=>D(e)),H(ew[0])}function eT(){document.querySelector(".issue__book .issue__book__progress").innerHTML='<h2>steps 1 of 8: <span class="step__description">find book</span></h2>',document.querySelector(".book-mark")&&(C(e$,"hidden"),C(eL,"un-marked","un-marked__icon"),M(eL,"marked","marked__icon"),document.querySelector(".book-mark").textContent="❌"),document.querySelector(".issue__book .step__1 ul").innerHTML=""}function eB(e){let t=document.querySelector(".issue__book__progress h2");switch(e){case 2:t.style.setProperty("--step-width","25%");break;case 3:t.style.setProperty("--step-width","37.5%");break;case 4:t.style.setProperty("--step-width","50%");break;case 5:t.style.setProperty("--step-width","62.5%");break;case 6:t.style.setProperty("--step-width","75%");break;case 7:t.style.setProperty("--step-width","87.5%");break;case 8:t.style.setProperty("--step-width","100%")}}document.addEventListener("click",function(e){("issue__book"===e.target.dataset.pointer||e.target.classList.contains("next__step__btn"))&&ej(),"issue__book"===e.target.dataset.pointer&&eT(),e.target.closest(".issue__book")&&(I()&&k.push(I()),"search__books__offline__btn"===e.target.id&&function(e){if(e.preventDefault(),!e.target.closest(".issue__book"))return;let t=eN.value;if(e.target.closest(".issue__book__find__book")&&!V(t)){x(eS,"error","sorry, We could not find the book you query. please try again"),D(e$),G("search__books__offline__input");return}H(e$),G("search__books__offline__input"),b=Y(t),B(document.querySelector(".issue__book .search-result__lists"),[b])}(e),e.target.classList.contains("book-mark")&&(e.target.classList.contains("un-marked__icon")?(M(eL,"hidden","un-marked","un-marked__icon"),C(eL,"marked","marked__icon"),document.querySelector(".book-mark").textContent="✅",function(e,t){e.insertAdjacentHTML("afterend",t)}(e$,ex(2))):(A(document.querySelector(".next__step__btn")),C(eL,"un-marked","un-marked__icon"),M(eL,"marked","marked__icon"),document.querySelector(".book-mark").textContent="❌")),e.target.classList.contains("next__step__btn")&&function(e){let t=e.target.dataset.goNextStep;Number(t)>8||(document.querySelector(".issue__book__progress").innerHTML=`<h2> steps ${t} of 8 : <span class="step__description">${eU[Number(t)-1]}</span></h2>`,D(document.querySelector(".book__issue__step")),A(document.querySelector("[data-go-next-step]")),H(document.querySelector(`.step__${t}`)),document.querySelector(`.step__${Number(t)} .next__step__btn`)?.remove(),"8"===t?U(document.querySelector(`.step__${Number(t)}`),ex(Number(t)+1,"OK")):U(document.querySelector(`.step__${Number(t)}`),ex(Number(t)+1,"NEXT STEP")),2===Number(t)&&function(e){var t;if(t=".issue__book .step__2 .book-status",document.querySelector(t).innerHTML="",0===e.quantity){U(document.querySelector(".issue__book .step__2 .book-status"),'<h1 class="h1">Book Not Available</h1>');let e=document.querySelector(".issue__book .step__2 .next__step__btn");e.textContent="Previous Step",C(e,"prev__step__btn"),M(e,"next__step__btn")}else U(document.querySelector(".issue__book .step__2 .book-status"),'<h1 class="h1">Book Available</h1>')}(b))}(e),"2"===e.target.dataset.goNextStep&&eB(2),e.target.classList.contains("prev__step__btn")&&(ej(),eT(),A(document.querySelector(".step__2 .prev__step__btn"))),"3"===e.target.dataset.goNextStep&&(eB(3),D(document.querySelector(".step__3 .next__step__btn")),D(document.querySelector(".step__3 .go__library-page")),document.querySelectorAll(".step__3 .library-card__check__input").forEach(e=>e.checked=!1)),e.target.classList.contains("library-card__check__input")&&("yes"===e.target.value?(H(document.querySelector(".step__3 .next__step__btn")),D(document.querySelector(".step__3 .go__library-page"))):(H(document.querySelector(".step__3 .go__library-page")),D(document.querySelector(".step__3 .next__step__btn")))),e.target.classList.contains("go__library-page")&&(H(document.querySelector(".library-management")),document.querySelectorAll(".library-management section").forEach(e=>e.classList.remove("hidden")),D(document.querySelector(".issue__book")),D(document.querySelector(".step__3"))),"4"===e.target.dataset.goNextStep&&(eB(4),function(){let e=document.querySelector(".issue__book .step__4");A(document.querySelector(".step__4 .book__info"));let t=Y(b.title),o=`
	<section class="book__info">
		<img src="${t.imgUrl}" alt="${t.title}">
		<section class="book__info__details">
			<p>book name: ${t.title}</p>
			<p>author name: ${t.authorName}</p>
			<p>book language: ${t.language}</p>
			<p>genre: ${t.genre} </p>
			<p>release year: ${t.releaseYear}</p>
			<p>release version: ${t.releaseVersion}</p>
			<p>popularity: ${t.popularity} </p>
			<p>book pages: ${t.pages} </p>
			<p>book license: ${t.GNUlicense}</p>
			<p>author bio link: ${t.authorBio} </p>
			<p>book publication link: ${t.publicationLink}</p>
			<p>publication name: ${t.publicationName} </p>
		</section>
	</section>`;e.insertAdjacentHTML("afterbegin",o)}()),"5"===e.target.dataset.goNextStep&&(eB(5),D(document.querySelector(".issue__book .step__5 .next__step__btn")),H(document.querySelector(".issue__book .step__5 .book__issue__waiting")),setTimeout(()=>{D(document.querySelector(".issue__book .step__5 .book__issue__waiting")),H(document.querySelector(".issue__book .step__5 .book__issue__success")),H(document.querySelector(".issue__book .step__5 .next__step__btn"))},10)),"6"===e.target.dataset.goNextStep&&(eB(6),H(document.querySelector(".step__6 form #delivery-address-btn")),D(document.querySelector(".step__6 .next__step__btn")),document.addEventListener("submit",e=>{e.preventDefault(),0===(y=e.target[0].value).length?x(eS,"error","You can not add an empty address. Please try again"):(D(document.querySelector(".step__6 form #delivery-address-btn")),H(document.querySelector(".step__6 .next__step__btn")))})),"7"===e.target.dataset.goNextStep&&(eB(7),function(){var e;let t=new Date,o=t.getDate(),n=t.getDay(),a=t.getMonth(),i=t.getFullYear(),r=e=>{switch(e){case 1:return"february";case 2:return"march";case 3:return"april";case 4:return"may";case 5:return"june";case 6:return"july";case 7:return"auguest";case 8:return"september";case 9:return"october";case 10:return"november";case 11:return"december";default:return"could not get month information"}};function s(e,t){return new Date(e,t+1,0).getDate()}e=0,r(a),A(document.querySelector(".step__7 .return-book__info")),(()=>{if(o+15>s(i,a)){let e=Math.abs(s(i,a)-(o+15)),t=`
			<p class="return-book__info">please return the book before <br> date: ${e}, month: ${r(a+1)}, year: ${i}</p>`;document.querySelector(".issue__book .step__7").insertAdjacentHTML("afterbegin",t)}else{let e=`
				<p class="return-book__info">please return the book before <br> date: ${o+15}, month: ${r(a)}, year: ${i}</p>`;document.querySelector(".issue__book .step__7").insertAdjacentHTML("afterbegin",e)}})()}()),"8"===e.target.dataset.goNextStep&&(eB(8),A(document.querySelector(".issue__book .step__8 .checkout-message")),U(document.querySelector(".issue__book .step__8"),`<p class="checkout-message">
			thank you for choosing our library. <br />
			here is your book will be deliver to <span>${y}</span>.
		<br />have a nice day. please visit us again
		</p>`,"afterbegin")),"9"===e.target.dataset.goNextStep&&(D(document.querySelector(".issue__book"),document.querySelector(".issue__book").children[3]),H(document.querySelector(".library-management"),...document.querySelector(".library-management").children),function(){let e=b.quantity;b.quantity=e-1;let t=[...S.preBook,...I()].find(e=>{if(b.title===e.title)return e.quantity=b.quantity}),o=S.preBook.find(e=>e.id===t.id),n=I().filter(e=>e.id!==b.id);o||localStorage.setItem("newBook",JSON.stringify([...n,t])),ef()}()))});var eE={};!function(){function e(e,t,o){return e.call.apply(e.bind,arguments)}function t(e,t,o){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,n),e.apply(t,o)}}return function(){return e.apply(t,arguments)}}function o(n,a,i){return(o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:t).apply(null,arguments)}var n=Date.now||function(){return+new Date};function a(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var i=!!window.FontFace;function r(e,t,o,n){if(t=e.c.createElement(t),o)for(var a in o)o.hasOwnProperty(a)&&("style"==a?t.style.cssText=o[a]:t.setAttribute(a,o[a]));return n&&t.appendChild(e.c.createTextNode(n)),t}function s(e,t,o){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(o,e.lastChild)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e,t,o){t=t||[],o=o||[];for(var n=e.className.split(/\s+/),a=0;a<t.length;a+=1){for(var i=!1,r=0;r<n.length;r+=1)if(t[a]===n[r]){i=!0;break}i||n.push(t[a])}for(a=0,t=[];a<n.length;a+=1){for(r=0,i=!1;r<o.length;r+=1)if(n[a]===o[r]){i=!0;break}i||t.push(n[a])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function u(e,t){for(var o=e.className.split(/\s+/),n=0,a=o.length;n<a;n++)if(o[n]==t)return!0;return!1}function p(e,t,o){function n(){u&&a&&c&&(u(l),u=null)}t=r(e,"link",{rel:"stylesheet",href:t,media:"all"});var a=!1,c=!0,l=null,u=o||null;i?(t.onload=function(){a=!0,n()},t.onerror=function(){a=!0,l=Error("Stylesheet failed to load"),n()}):setTimeout(function(){a=!0,n()},0),s(e,"head",t)}function h(e,t,o,n){var a=e.c.getElementsByTagName("head")[0];if(a){var i=r(e,"script",{src:t}),s=!1;return i.onload=i.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,o&&o(null),i.onload=i.onreadystatechange=null,"HEAD"==i.parentNode.tagName&&a.removeChild(i))},a.appendChild(i),setTimeout(function(){s||(s=!0,o&&o(Error("Script load timeout")))},n||5e3),i}return null}function m(){this.a=0,this.c=null}function d(e){return e.a++,function(){e.a--,_(e)}}function _(e){0==e.a&&e.c&&(e.c(),e.c=null)}function f(e){this.a=e||"-"}function g(e,t){this.c=e,this.f=4,this.a="n";var o=(t||"n4").match(/^([nio])([1-9])$/i);o&&(this.a=o[1],this.f=parseInt(o[2],10))}function b(e){var t=[];e=e.split(/,\s*/);for(var o=0;o<e.length;o++){var n=e[o].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function y(e){return e.a+e.f}function k(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function v(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new f("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function q(e){if(e.g){var t=u(e.f,e.a.c("wf","active")),o=[],n=[e.a.c("wf","loading")];t||o.push(e.a.c("wf","inactive")),l(e.f,o,n)}S(e,"inactive")}function S(e,t,o){e.j&&e.h[t]&&(o?e.h[t](o.c,y(o)):e.h[t]())}function w(){this.c={}}function N(e,t){this.c=e,this.f=t,this.a=r(this.c,"span",{"aria-hidden":"true"},this.f)}function $(e){s(e.c,"body",e.a)}function L(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(e.c)+";"+("font-style:"+k(e)+";font-weight:")+e.f+"00;"}function U(e,t,o,n,a,i){this.g=e,this.j=t,this.a=n,this.c=o,this.f=a||3e3,this.h=i||void 0}function x(e,t,o,n,a,i,r){this.v=e,this.B=t,this.c=o,this.a=n,this.s=r||"BESbswy",this.f={},this.w=a||3e3,this.u=i||null,this.m=this.j=this.h=this.g=null,this.g=new N(this.c,this.s),this.h=new N(this.c,this.s),this.j=new N(this.c,this.s),this.m=new N(this.c,this.s),e=L(e=new g(this.a.c+",serif",y(this.a))),this.g.a.style.cssText=e,e=L(e=new g(this.a.c+",sans-serif",y(this.a))),this.h.a.style.cssText=e,e=L(e=new g("serif",y(this.a))),this.j.a.style.cssText=e,e=L(e=new g("sans-serif",y(this.a))),this.m.a.style.cssText=e,$(this.g),$(this.h),$(this.j),$(this.m)}f.prototype.c=function(e){for(var t=[],o=0;o<arguments.length;o++)t.push(arguments[o].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},U.prototype.start=function(){var e=this.c.o.document,t=this,o=n(),a=new Promise(function(a,i){!function r(){var s;n()-o>=t.f?i():e.fonts.load(k(s=t.a)+" "+s.f+"00 300px "+b(s.c),t.h).then(function(e){1<=e.length?a():setTimeout(r,25)},function(){i()})}()}),i=null;Promise.race([new Promise(function(e,o){i=setTimeout(o,t.f)}),a]).then(function(){i&&(clearTimeout(i),i=null),t.g(t.a)},function(){t.j(t.a)})};var j={D:"serif",C:"sans-serif"},T=null;function B(){if(null===T){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);T=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return T}function E(e,t,o){for(var n in j)if(j.hasOwnProperty(n)&&t===e.f[j[n]]&&o===e.f[j[n]])return!0;return!1}function I(e,t){setTimeout(o(function(){c(this.g.a),c(this.h.a),c(this.j.a),c(this.m.a),t(this.a)},e),0)}function D(e,t,o){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=o}x.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=n(),function e(t){var a,i=t.g.a.offsetWidth,r=t.h.a.offsetWidth;(a=i===t.f.serif&&r===t.f["sans-serif"])||(a=B()&&E(t,i,r)),a?n()-t.A>=t.w?B()&&E(t,i,r)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?I(t,t.v):I(t,t.B):setTimeout(o(function(){e(this)},t),50):I(t,t.v)}(this)};var H=null;function A(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&l(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),S(e,"active")):q(e.a))}function C(e){this.j=e,this.a=new w,this.h=0,this.f=this.g=!0}function M(e,t){this.c=e,this.a=t}function G(e,t){this.c=e,this.a=t}function P(e,t){e?this.c=e:this.c=V,this.a=[],this.f=[],this.g=t||""}D.prototype.g=function(e){var t=this.a;t.g&&l(t.f,[t.a.c("wf",e.c,y(e).toString(),"active")],[t.a.c("wf",e.c,y(e).toString(),"loading"),t.a.c("wf",e.c,y(e).toString(),"inactive")]),S(t,"fontactive",e),this.m=!0,A(this)},D.prototype.h=function(e){var t=this.a;if(t.g){var o=u(t.f,t.a.c("wf",e.c,y(e).toString(),"active")),n=[],a=[t.a.c("wf",e.c,y(e).toString(),"loading")];o||n.push(t.a.c("wf",e.c,y(e).toString(),"inactive")),l(t.f,n,a)}S(t,"fontinactive",e),A(this)},C.prototype.load=function(e){this.c=new a(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,n){var a,i=[],r=n.timeout;(a=t).g&&l(a.f,[a.a.c("wf","loading")]),S(a,"loading");var i=function(e,t,o){var n,a=[];for(n in t)if(t.hasOwnProperty(n)){var i=e.c[n];i&&a.push(i(t[n],o))}return a}(e.a,n,e.c),s=new D(e.c,t,r);for(e.h=i.length,t=0,n=i.length;t<n;t++)i[t].load(function(t,n,a){!function(e,t,n,a,i){var r=0==--e.h;(e.f||e.g)&&setTimeout(function(){var e=i||null,s=a||{};if(0===n.length&&r)q(t.a);else{t.f+=n.length,r&&(t.j=r);var c,u=[];for(c=0;c<n.length;c++){var p=n[c],h=s[p.c],m=t.a,d=p;if(m.g&&l(m.f,[m.a.c("wf",d.c,y(d).toString(),"loading")]),S(m,"fontloading",d),m=null,null===H){if(window.FontFace){var d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),_=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);H=d?42<parseInt(d[1],10):!_}else H=!1}m=H?new U(o(t.g,t),o(t.h,t),t.c,p,t.s,h):new x(o(t.g,t),o(t.h,t),t.c,p,t.s,e,h),u.push(m)}for(c=0;c<u.length;c++)u[c].start()}},0)}(e,s,t,n,a)})}(this,new v(this.c,e),e)},M.prototype.load=function(e){var t=this,o=t.a.projectId,n=t.a.version;if(o){var a=t.c.o;h(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+o+".js"+(n?"?v="+n:""),function(n){n?e([]):(a["__MonotypeConfiguration__"+o]=function(){return t.a},function t(){if(a["__mti_fntLst"+o]){var n,i=a["__mti_fntLst"+o](),r=[];if(i)for(var s=0;s<i.length;s++){var c=i[s].fontfamily;void 0!=i[s].fontStyle&&void 0!=i[s].fontWeight?(n=i[s].fontStyle+i[s].fontWeight,r.push(new g(c,n))):r.push(new g(c))}e(r)}else setTimeout(function(){t()},50)}())}).id="__MonotypeAPIScript__"+o}else e([])},G.prototype.load=function(e){var t,o,n,a=this.a.urls||[],i=this.a.families||[],r=this.a.testStrings||{},s=new m;for(o=0,n=a.length;o<n;o++)p(this.c,a[o],d(s));var c=[];for(o=0,n=i.length;o<n;o++)if((a=i[o].split(":"))[1])for(var l=a[1].split(","),u=0;u<l.length;u+=1)c.push(new g(a[0],l[u]));else c.push(new g(a[0]));t=function(){e(c,r)},s.c=t,_(s)};var V="https://fonts.googleapis.com/css";function Y(e){this.f=e,this.a=[],this.c={}}var O={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},F={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},W={i:"i",italic:"i",n:"n",normal:"n"},J=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function z(e,t){this.c=e,this.a=t}var K={Arimo:!0,Cousine:!0,Tinos:!0};function R(e,t){this.c=e,this.a=t}function X(e,t){this.c=e,this.f=t,this.a=[]}z.prototype.load=function(e){var t,o=new m,n=this.c,a=new P(this.a.api,this.a.text),i=this.a.families;!function(e,t){for(var o=t.length,n=0;n<o;n++){var a=t[n].split(":");3==a.length&&e.f.push(a.pop());var i="";2==a.length&&""!=a[1]&&(i=":"),e.a.push(a.join(i))}}(a,i);var r=new Y(i);(function(e){for(var t=e.f.length,o=0;o<t;o++){var n=e.f[o].split(":"),a=n[0].replace(/\+/g," "),i=["n4"];if(2<=n.length){var r,s,c=n[1];if(r=[],c)for(var c=c.split(","),l=c.length,u=0;u<l;u++){if((s=c[u]).match(/^[\w-]+$/)){var p=J.exec(s.toLowerCase());if(null==p)s="";else{if(s=null==(s=p[2])||""==s?"n":W[s],null==(p=p[1])||""==p)p="4";else var h=F[p],p=h||(isNaN(p)?"4":p.substr(0,1));s=[s,p].join("")}}else s="";s&&r.push(s)}0<r.length&&(i=r),3==n.length&&(n=n[2],r=[],0<(n=n?n.split(","):r).length&&(n=O[n[0]])&&(e.c[a]=n))}for(e.c[a]||(n=O[a])&&(e.c[a]=n),n=0;n<i.length;n+=1)e.a.push(new g(a,i[n]))}})(r),p(n,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,o=[],n=0;n<t;n++)o.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+o.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(a),d(o)),t=function(){e(r.a,r.c,K)},o.c=t,_(o)},R.prototype.load=function(e){var t=this.a.id,o=this.c.o;t?h(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)e([]);else if(o.Typekit&&o.Typekit.config&&o.Typekit.config.fn){t=o.Typekit.config.fn;for(var n=[],a=0;a<t.length;a+=2)for(var i=t[a],r=t[a+1],s=0;s<r.length;s++)n.push(new g(i,r[s]));try{o.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(n)}},2e3):e([])},X.prototype.load=function(e){var t,o=this.f.id,n=this.c.o,a=this;o?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[o]=function(t,o){for(var n=0,i=o.fonts.length;n<i;++n){var r=o.fonts[n];a.a.push(new g(r.name,function(e){var t=4,o="n",n=null;return e&&((n=e.match(/(normal|oblique|italic)/i))&&n[1]&&(o=n[1].substr(0,1).toLowerCase()),(n=e.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?t=7:/[1-9]00/.test(n[1])&&(t=parseInt(n[1].substr(0,1),10)))),o+t}("font-weight:"+r.weight+";font-style:"+r.style)))}e(a.a)},h(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((t=this.c).o.location.hostname||t.a.location.hostname)+"/"+o+".js",function(t){t&&e([])})):e([])};var Q=new C(window);Q.a.c.custom=function(e,t){return new G(t,e)},Q.a.c.fontdeck=function(e,t){return new X(t,e)},Q.a.c.monotype=function(e,t){return new M(t,e)},Q.a.c.typekit=function(e,t){return new R(t,e)},Q.a.c.google=function(e,t){return new z(t,e)};var Z={load:o(Q.load,Q)};"function"==typeof define&&define.amd?define(function(){return Z}):eE?eE=Z:(window.WebFont=Z,window.WebFontConfig&&Q.load(window.WebFontConfig))}(),window.addEventListener("load",()=>{var e;((e=eE)&&e.__esModule?e.default:e).load({google:{families:["Inter:400, 600","Open Sans: 400, 600","Work Sans: 400, 600","Lato: 400, 700","Arimo: 400, 600","Roboto: 400, 700","Montserrat: 400, 600","Inconsolata: 400, 600"]}})}),Q.welcomeViewControl,ec.libraryPageControl,eg.offlineBookControl,eq.searchBookControl,eh.uploadBookControl;
//# sourceMappingURL=index.0c247c8b.js.map
